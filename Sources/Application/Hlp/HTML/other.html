<HTML>
<HEAD>
<TITLE>Miscellaneous Macros and Functions</TITLE>
</HEAD>
<BODY>
<H1>
<TABLE style="WIDTH: 722px; HEIGHT: 20px" cellSpacing=2 cellPadding=5 width=722 
bgColor=#ffffff border=0>
  
  <TR>
    <TD align=left bgColor=#ccccff>
      <P align=center><FONT face=Arial color=red size=5 
      ><STRONG>Miscellaneous Macros and Functions</STRONG></FONT></P></TD></TR>
  <TR>
    <TD align=left bgColor=#eeeeff>
      <P><FONT face=Arial size=2>This chapter describes miscellaneous routines 
      not covered elsewhere. </FONT></P>
      <H2><A name=unctrl><FONT face=Arial 
      size=3 color=blue><U>unctrl : translate 
      characters to upper case</U>      </FONT></A></H2>
      <P><A name=IDX179></A><A name=IDX180></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include &lt;unctrl.h&gt;<BR>char 
        *unctrl(int <VAR>c</VAR>);<BR>int unctrllen(int <VAR>c</VAR>); 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>unctrl is a macro which returns the 
        printable representation of <VAR>c</VAR> as a string. unctrllen is a 
        macro which returns the length of the printable representation of 
        <VAR>c</VAR>. </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>unctrl returns a string of the 
        printable representation of <VAR>c</VAR>. </FONT></FONT><FONT face=Arial 
        size=2>unctrllen returns the length of the string which is the printable 
        representation of <VAR>c</VAR>.</FONT></P></BLOCKQUOTE>
      <H1>
      <DL compact>
        <DD><FONT face=Arial size=2></FONT></DD></DL><A 
      name=vargl><FONT face=Arial size=3 
      color=blue><U>Variable Argument Lists</U> 
       </FONT></A></H1>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial size=2>The printf family of functions is defined to 
        accept a variable number of arguments, rather than a fixed argument 
        list. You can define your own functions with a variable argument list, 
        by using macro definitions from either <TT>`stdarg.h'</TT> (for 
        compatibility with ANSI C) or from <TT>`varargs.h'</TT> (for 
        compatibility with a popular convention prior to ANSI C). 
      </FONT></P></BLOCKQUOTE>
      <H2><A name=macros><FONT face=Arial><FONT 
      size=3><U><FONT 
      color=blue>ANSI-standard macros, <TT>`stdarg.h'</TT></FONT></U></FONT></FONT></A></H2>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial size=2>In ANSI C, a function has a variable number 
        of arguments when its parameter list ends in an ellipsis (...). The 
        parameter list must also include at least one explicitly named argument; 
        that argument is used to initialize the variable list data structure. 
        </FONT></P>
        <P><FONT face=Arial size=2>ANSI C defines three macros (va_start, 
        va_arg, and va_end) to operate on variable argument lists. 
        <TT>`stdarg.h'</TT> also defines a special type to represent variable 
        argument lists: this type is called va_list. </FONT></P></BLOCKQUOTE>
      <H3><A name=init_varg><FONT face=Arial 
      size=3 color=blue><U>Initialize variable 
      argument list</U>   </FONT></A></H3>
      <P><A name=IDX216></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include &lt;stdarg.h&gt;<BR>void 
        va_start(va_list <VAR>ap</VAR>, <VAR>rightmost</VAR>); 
      </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>Use va_start to initialize the variable 
        argument list <VAR>ap</VAR>, so that va_arg can extract values from it. 
        <VAR>rightmost</VAR> is the name of the last explicit argument in the 
        parameter list (the argument immediately preceding the ellipsis 
        <SAMP>`...'</SAMP> that flags variable arguments in an ANSI C function 
        header). You can only use va_start in a function declared using this 
        ellipsis notation (not, for example, in one of its subfunctions). 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_start does not return a result. 
        </FONT></FONT></P></BLOCKQUOTE>
      <H3><FONT face=Arial 
      size=3 
      color=blue><U>Extract a value from argument list</U>     </FONT></H3>
      <P><A name=IDX217></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include 
        &lt;stdarg.h&gt;<BR><VAR>type</VAR> va_arg(va_list <VAR>ap</VAR>, 
        <VAR>type</VAR>); </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_arg returns the next unprocessed 
        value from a variable argument list <VAR>ap</VAR> (which you must 
        previously create with <VAR>va_start</VAR>). Specify the type for the 
        value as the second parameter to the macro, <VAR>type</VAR>. 
        </FONT></FONT></P>
        <P><FONT face=Arial size=2>You may pass a va_list object <VAR>ap</VAR> 
        to a subfunction, and use va_arg from the subfunction rather than from 
        the function actually declared with an ellipsis in the header; however, 
        in that case you may <EM>only</EM> use va_arg from the subfunction. ANSI 
        C does not permit extracting successive values from a single 
        variable-argument list from different levels of the calling stack. 
        </FONT></P>
        <P><FONT face=Arial size=2>There is no mechanism for testing whether 
        there is actually a next argument available; you might instead pass an 
        argument count (or some other data that implies an argument count) as 
        one of the fixed arguments in your function call. </FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_arg returns the next argument, an 
        object of type <VAR>type</VAR>. </FONT></FONT></P></BLOCKQUOTE>
      <H3><FONT face=Arial 
      size=3 
      color=blue><U>Abandon a variable argument list</U>    </FONT></H3>
      <P><A name=IDX218></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include &lt;stdarg.h&gt;<BR>void 
        va_end(va_list <VAR>ap</VAR>); </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>Use va_end to declare that your program 
        will not use the variable argument list <VAR>ap</VAR> any further. 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_end does not return a result. 
        </FONT></FONT></P></BLOCKQUOTE>
      <H2><FONT face=Arial><FONT 
      size=3><U><FONT color=blue>Traditional macros, <TT>`varargs.h'</TT></FONT></U></FONT></FONT></H2>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial size=2>If your C compiler predates ANSI C, you may 
        still be able to use variable argument lists using the macros from the 
        <TT>`varargs.h'</TT> header file. These macros resemble their ANSI 
        counterparts, but have important differences in usage. In particular, 
        since traditional C has no declaration mechanism for variable argument 
        lists, two additional macros are provided simply for the purpose of 
        defining functions with variable argument lists. </FONT></P>
        <P><FONT face=Arial size=2>As with <TT>`stdarg.h'</TT>, the type va_list 
        is used to hold a data structure representing a variable argument list. 
        </FONT></P></BLOCKQUOTE>
      <H3><FONT face=Arial 
      size=3 
      color=blue><U>Declare variable arguments</U>  </FONT></H3>
      <P><A name=IDX219></A><A name=IDX220></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include 
        &lt;varargs.h&gt;<BR><VAR>function</VAR>(va_alist) va_dcl 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>To use the <TT>`varargs.h'</TT> version 
        of variable argument lists, you must declare your function with a call 
        to the macro va_alist as its argument list, and use va_dcl as the 
        declaration. <EM>Do not use a semicolon after va_dcl.</EM> 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>These macros cannot be used in a 
        context where a return is syntactically possible. 
      </FONT></FONT></P></BLOCKQUOTE>
      <H3><FONT face=Arial 
      size=3 
      color=blue><U>Initialize variable argument list</U>   </FONT></H3>
      <P><A name=IDX221></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include &lt;varargs.h&gt;<BR> va_list 
        <VAR>ap</VAR>; va_start(<VAR>ap</VAR>); </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>With the <TT>`varargs.h'</TT> macros, 
        use va_start to initialize a data structure <VAR>ap</VAR> to permit 
        manipulating a variable argument list. <VAR>ap</VAR> must have the type 
        <VAR>va_alist</VAR>. </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_start does not return a result. 
        </FONT></FONT></P></BLOCKQUOTE>
      <H3><FONT face=Arial 
      size=3 
      color=blue><U>Extract a value from argument list</U>     </FONT></H3>
      <P><A name=IDX222></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include &lt;varargs.h&gt;<BR> 
        <VAR>type</VAR> va_arg(va_list <VAR>ap</VAR>, <VAR>type</VAR>); 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_arg returns the next unprocessed 
        value from a variable argument list <VAR>ap</VAR> (which you must 
        previously create with <VAR>va_start</VAR>). Specify the type for the 
        value as the second parameter to the macro, <VAR>type</VAR>. 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_arg returns the next argument, an 
        object of type <VAR>type</VAR>. </FONT></FONT></P></BLOCKQUOTE>
      <H3><FONT face=Arial size=3 
      color=blue><U>Abandon a variable argument list</U>    </FONT></H3>
      <P><A name=IDX223></A><FONT face=Arial><FONT 
      size=2><STRONG>Synopsis</STRONG></FONT></FONT>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>#include &lt;varargs.h&gt;<BR> 
        va_end(va_list <VAR>ap</VAR>); </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
      size=2><STRONG>Description</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>Use va_end to declare that your program 
        will not use the variable argument list <VAR>ap</VAR> any further. 
        </FONT></FONT></P></BLOCKQUOTE>
      <P><FONT face=Arial><FONT 
size=2><STRONG>Returns</STRONG></FONT></FONT></P>
      <BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
        <P><FONT face=Arial><FONT size=2>va_end does not return a 
        result.</FONT></FONT></P></BLOCKQUOTE></TD></TR></TABLE></H1>
</BODY>
</HTML>
